<!doctype html>
<html>

{% include 'head.html' %}

<head>
<script>

  $(document).ready(function() {
      var config = {
          pageLength: 200,
          select: 'multi+shift',
          fixedHeader: true,
          colReorder: true,
          columnDefs: [{
              // TODO(blais): Set this by name (doesn't seem to work).
              targets: [7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],
              className: 'dt-body-right'
          }]
      };
      var table = $('#chains').DataTable(config);

      InstallDataTableFocus();

      $(table.table().header()).find('th').each(function (_) {
          $(this).addClass($(this).text());
          console.log(this);
      });

      // console.log(table.table().header());

      // TODO(blais): Remove, this was replaced with a link.
      // When the Clear button is pressed, clear the selection.
      $('button#clear').click( function () {
          table.rows('.selected').deselect();
      } );

      // Redirect with a list of the selected chains.
      $('button#share').click( function () {
          var ids = table.rows('.selected').ids().join(",");
          window.open(`/share?chain_ids=${ids}`, '_blank');
      } );

      // Redirect with a list of the selected chains.
      $('button#stats').click( function () {
          var ids = table.rows('.selected').ids().join(",");
          window.open(`/stats?chain_ids=${ids}`, '_blank');
      } );


  });

</script>
</head>

<body>
{% include 'navigation.html' %}
<button id="clear">Clear</button>
<button id="stats">Stats</button>
<button id="share">Share</button>

{{ table|safe }}
<body>

</html>
